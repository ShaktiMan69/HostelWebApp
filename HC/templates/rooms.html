{% extends 'base.html' %}
{% block content %}
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog  modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Room Photos</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img class="d-block w-100" src="https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg" alt="First slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100" src="https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg" alt="Second slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100" src="https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg" alt="Third slide">
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .modal-open, body {overflow: inherit !important;}

  .modal-dialog {
  max-width: max-content !important;
  }

  .modal-body {
    display: flex;
  }

  .modal-body img {
    object-fit: contain;
  }


</style>
<script>

function createTable(tableData) {
  var table = document.createElement('table');
  var tableBody = document.createElement('tbody');

  tableData.forEach(function(rowData) {
    var row = document.createElement('tr');

    rowData.forEach(function(cellData) {
      var cell = document.createElement('td');
      cell.appendChild(document.createTextNode(cellData));
      row.appendChild(cell);
    });

    tableBody.appendChild(row);
  });

  table.appendChild(tableBody);
  document.body.appendChild(table);
}


function createGrid(cellsList, containerId) {
    const gridContainer = document.getElementById(containerId);
    gridContainer.innerHTML = ""; // Clear any previous content
  
    const table = document.createElement("table");
    gridContainer.appendChild(table);
  
    for (let rowIndex = 0; rowIndex < rows; rowIndex++) {
      const tableRow = document.createElement("tr");
      table.appendChild(tableRow);
  
      for (let colIndex = 0; colIndex < columns; colIndex++) {
        const tableCell = document.createElement("td");
        tableCell.innerHTML = `
          <button type="button"
            class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn">
            1
          </button>`; // Set cell content (you can customize this)
        tableRow.appendChild(tableCell);
      }
    }
  }
</script>
<style>
  * {
    font-family: "Inter", sans-serif;
    font-optical-sizing: auto;
    font-style: normal;
    font-variation-settings: "slnt" 0;
  }

  .room-btn {
    width: 50px !important;
    border-radius: 10px;
    outline: none;
    border: 0;
  }

  .gender-card:hover {
    cursor: pointer;
  }

</style>
<div class="container">
  <div class="container tw-bg-blue-500 tw-rounded-lg px-5 py-3 text-light text-center my-3" style="max-width: 700px">
    <h3 class="my-3 tw-text-3xl tw-font-semibold">Rooms</h3>
    <div
    class="gender-select tw-gap-5 md:tw-gap-10 tw-flex tw-flex-col md:tw-flex-row md:tw-items-center"
  >
    <div
      id="boys"
      class="tw-transition-colors tw-duration-300 [&.active]:tw-bg-gradient-to-br tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-green-200 [&.active]:tw-text-white gender-card card col p-5 tw-rounded-lg tw-font-semibold tw-text-xl"
      style="color: black;"
    >
      BOYS HOSTEL
    </div>
    <div
      id="girls"
      class="tw-transition-colors tw-duration-300 [&.active]:tw-bg-gradient-to-br tw-from-pink-500 tw-via-pink-600 tw-to-pink-700 hover:tw-bg-pink-200 [&.active]:tw-text-white gender-card card col p-5 tw-rounded-lg tw-font-semibold tw-text-xl"
      style="color: black;"
    >
      GIRLS HOSTEL
    </div>
  </div>
    <div id="drops" class="mt-4">

      <div id="id-boys" class="mb-2 form-floating" style="display: none">
        <select class="form-select" aria-label="Boys Hostel Room">
          <option value="0"></option>
          <option value="1">ID1</option>
          <option value="2">ID2</option>
          <option value="3">ID3</option>
        </select>
        <label class="text-dark" for="floor">Select ID</label>
      </div>
      <div id="id-girls" class="mb-2 form-floating" style="display: none">
        <select class="form-select" aria-label="Girls Hostel Room">
          <option value="0"></option>
          <option value="4">ID4</option>
          <option value="5">ID5</option>
        </select>
        <label class="text-dark" for="floor">Select ID</label>
      </div>
      <div id="floor" class="mb-2 form-floating"  style="display: none">
        <select class="form-select" aria-label="Select Floor">
          <option value="0"></option>
          <option value="1">Floor-0</option>
          <option value="2">Floor-1</option>
        </select>
        <label class="text-dark" for="floor">Select Floor</label>
      </div>
      <div class="d-grid gap-2">
        <button class="btn btn-success" type="button" id="getDetails" style="display: none" >Get Details</button>
      </div>
    </div>
  </div>
  <div
  class="container tw-bg-gray-300 tw-rounded-lg p-2 text-light text-center"
  style="max-width: 700px"
>
  <div class="container text-center" id="rooms_grid">
    <div class="row row-cols-4 p-2">
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
          data-bs-toggle="modal" data-bs-target="#exampleModal"
        >
          1
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          2
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          3
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          4
        </button>
      </div>
    </div>
    <div class="row row-cols-4 p-2">
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
          disabled
        >
          5
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          6
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          7
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          8
        </button>
      </div>
    </div>
    <div class="row row-cols-4 p-2">
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          9
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          10
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          11
        </button>
      </div>
      <div class="col">
        <button
          type="button"
          class="btn tw-bg-gradient-to-r tw-from-green-500 tw-via-green-600 tw-to-green-700 hover:tw-bg-gradient-to-br tw-text-white tw-font-medium disabled:tw-from-red-500 disabled:tw-via-red-600 disabled:tw-to-red-700 disabled:tw-cursor-not-allowed room-btn"
        >
          12
        </button>
      </div>
    </div>
  </div>
</div>
</div>




<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
  let girls = document.getElementById("girls");
  let boys = document.getElementById("boys");
  let idBoys = document.getElementById("id-boys");
  let idGirls = document.getElementById("id-girls");
  let floor = document.getElementById("floor");
  let getBtn = document.getElementById("getDetails");
  let rooms = {{ rooms_info }}
  let numCells = 0;

  function listToMatrix(list, elementsPerSubArray) {
      var matrix = [], i, k;

      for (i = 0, k = -1; i < list.length; i++) {
          if (i % elementsPerSubArray === 0) {
              k++;
              matrix[k] = [];
          }

          matrix[k].push(list[i]);
      }

      return matrix;
  }


  function range(n){
    return [...Array(5).keys()]
  }

  girls.addEventListener("click", () => {
    idBoys.style.display = "none";
    idGirls.style.display = "inherit";
    floor.style.display = "inherit";
    getBtn.style.display = 'inherit';

    numCells = rooms[idGirls.getElementsByClassName('form-select')[0].value]
    // girls.style.backgroundColor = "orchid";
    // boys.style.backgroundColor = "white";
    girls.classList.add("active");
    boys.classList.remove("active");
  });

  boys.addEventListener("click", () => {
    idGirls.style.display = "none";
    idBoys.style.display = "inherit";
    floor.style.display = "inherit";
    getBtn.style.display = 'inherit';

    numCells = rooms[idBoys.getElementsByClassName('form-select')[0].value]
    // girls.style.backgroundColor = "white";
    // boys.style.backgroundColor = "mediumspringgreen";
    girls.classList.remove("active");
    boys.classList.add("active");
  });

  getBtn.addEventListener("click", () => {
    if (numCells == 0) {
      alert("Please select the number of rooms");
      return
    }
      cellsList = range(numCells);
      console.log(cellsList);
      createGrid(cellsList, 'rooms_grid');
  });
</script>
{% endblock %}